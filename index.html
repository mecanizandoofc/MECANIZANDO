<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MECANIZANDO</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #fff; margin: 0; padding: 0; }
    header { background: #222; display: flex; justify-content: space-between; align-items: center; padding: 1rem; }
    .logo img { height: 40px; }
    .search-bar { display: flex; align-items: center; background: #333; padding: 0.5rem; border-radius: 8px; }
    .search-bar input { border: none; background: transparent; color: white; outline: none; width: 200px; margin-right: 8px; }
    .search-bar i { cursor: pointer; }
    .main { display: flex; padding: 1rem; gap: 1rem; }
    .sidebar { background: #1a1a1a; padding: 1rem; border-radius: 8px; width: 250px; }
    .content { flex: 1; display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
    .card { background: #222; padding: 1rem; border-radius: 8px; box-shadow: 0 0 5px rgba(0,255,200,0.2); }
    .card a { color: #00ffcc; text-decoration: none; }
    .admin-panel { background: #1a1a1a; padding: 1rem; margin: 1rem; border-radius: 8px; }
    .admin-panel input, .admin-panel textarea { width: 100%; margin-bottom: 0.5rem; padding: 0.5rem; background: #222; color: white; border: 1px solid #444; border-radius: 4px; }
    .admin-panel button { padding: 0.5rem 1rem; background: #00ffcc; border: none; color: #000; font-weight: bold; cursor: pointer; border-radius: 4px; }
    footer { text-align: center; padding: 1rem; background: #222; margin-top: 2rem; }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="logo.png" alt="Logo Mecanizando">
    </div>
    <div class="search-bar" id="searchContainer">
      <input type="text" id="searchInput" placeholder="Buscar por peça, marca ou modelo">
      <i class="fas fa-search"></i>
    </div>
  </header>

  <div class="main">
    <div class="sidebar" id="filtrosContainer">
      <h3><i class="fas fa-filter"></i> Filtros</h3>
      <label for="marcaSelect"><i class="fas fa-car"></i> Marca</label>
      <select id="marcaSelect" onchange="atualizarModelos()">
        <option value="">Todas as marcas</option>
      </select>

      <label for="modeloSelect"><i class="fas fa-car-side"></i> Modelo</label>
      <select id="modeloSelect" onchange="filtrarProdutos()">
        <option value="">Todos os modelos</option>
      </select>

      <label for="categoriaSelect"><i class="fas fa-cogs"></i> Categoria</label>
      <select id="categoriaSelect" onchange="filtrarProdutos()">
        <option value="">Todas as categorias</option>
        <option value="freio">Freio</option>
        <option value="suspensão">Suspensão</option>
        <option value="motor">Motor</option>
        <option value="transmissão">Transmissão</option>
      </select>
    </div>
    <div class="content" id="produtosContainer"></div>
  </div>

  <div class="admin-panel">
    <h3>Adicionar Produto</h3>
    <input type="text" id="produtoNome" placeholder="Nome do Produto">
    <input type="text" id="produtoMarca" placeholder="Marca">
    <input type="text" id="produtoModelo" placeholder="Modelo">
    <input type="text" id="produtoCategoria" placeholder="Categoria (freio, suspensão etc)">
    <textarea id="produtoDescricao" placeholder="Descrição do Produto"></textarea>
    <input type="url" id="produtoLink" placeholder="Link do Produto">
    <div id="previewLink" style="margin-bottom: 1rem; color: #00ffcc;"></div>
    <button onclick="adicionarProduto()">Adicionar Produto</button>
  </div>

  <footer>
    &copy; 2025 MECANIZANDO - Todos os direitos reservados
  </footer>

  <script>
    const produtos = [];
    const modelosPorMarca = {};

    function adicionarProduto() {
      const nome = document.getElementById('produtoNome').value;
      const marca = document.getElementById('produtoMarca').value;
      const modelo = document.getElementById('produtoModelo').value;
      const categoria = document.getElementById('produtoCategoria').value;
      const descricao = document.getElementById('produtoDescricao').value;
      const link = document.getElementById('produtoLink').value;

      if (!nome || !marca || !modelo || !categoria || !descricao || !link) {
        alert('Preencha todos os campos para adicionar o produto.');
        return;
      }

      produtos.push({ nome, marca, modelo, categoria, descricao, link });
      if (!modelosPorMarca[marca]) modelosPorMarca[marca] = new Set();
      modelosPorMarca[marca].add(modelo);
      atualizarFiltros();
      renderizarProdutos(produtos);
      limparCampos();
      document.getElementById('previewLink').innerHTML = '';
      alert('Produto adicionado com sucesso!');
    }

    function atualizarFiltros() {
      const marcaSelect = document.getElementById('marcaSelect');
      marcaSelect.innerHTML = '<option value="">Todas as marcas</option>';
      Object.keys(modelosPorMarca).forEach(marca => {
        marcaSelect.innerHTML += `<option value="${marca}">${marca}</option>`;
      });
    }

    function atualizarModelos() {
      const marca = document.getElementById('marcaSelect').value;
      const modeloSelect = document.getElementById('modeloSelect');
      modeloSelect.innerHTML = '<option value="">Todos os modelos</option>';
      if (marca && modelosPorMarca[marca]) {
        modelosPorMarca[marca].forEach(modelo => {
          modeloSelect.innerHTML += `<option value="${modelo}">${modelo}</option>`;
        });
      }
      filtrarProdutos();
    }

    function filtrarProdutos() {
      const marca = document.getElementById('marcaSelect').value;
      const modelo = document.getElementById('modeloSelect').value;
      const categoria = document.getElementById('categoriaSelect').value;
      const termo = document.getElementById('searchInput').value.toLowerCase();

      const filtrado = produtos.filter(p =>
        (!marca || p.marca === marca) &&
        (!modelo || p.modelo === modelo) &&
        (!categoria || p.categoria.toLowerCase() === categoria.toLowerCase()) &&
        (!termo || p.nome.toLowerCase().includes(termo) || p.marca.toLowerCase().includes(termo) || p.modelo.toLowerCase().includes(termo))
      );
      renderizarProdutos(filtrado);
    }

    function limparCampos() {
      document.getElementById('produtoNome').value = '';
      document.getElementById('produtoMarca').value = '';
      document.getElementById('produtoModelo').value = '';
      document.getElementById('produtoCategoria').value = '';
      document.getElementById('produtoDescricao').value = '';
      document.getElementById('produtoLink').value = '';
    }

    function renderizarProdutos(lista) {
      const container = document.getElementById('produtosContainer');
      container.innerHTML = '';

      const filtrosContainer = document.getElementById('filtrosContainer');
      const searchContainer = document.getElementById('searchContainer');

      if (lista.length === 0) {
        container.innerHTML = '<div class="mensagem-vazia">Nenhum produto cadastrado ainda.</div>';
        filtrosContainer.style.display = 'none';
        searchContainer.style.display = 'none';
      } else {
        filtrosContainer.style.display = 'block';
        searchContainer.style.display = 'flex';

        lista.forEach(produto => {
          container.innerHTML += `
            <div class="card">
              <h4>${produto.nome}</h4>
              <p><strong>Marca:</strong> ${produto.marca}</p>
              <p><strong>Modelo:</strong> ${produto.modelo}</p>
              <p><strong>Categoria:</strong> ${produto.categoria}</p>
              <p>${produto.descricao}</p>
              <a href="${produto.link}" target="_blank">Ver Produto</a>
            </div>
          `;
        });
      }
    }

    window.onload = function () {
      document.getElementById('produtoLink').addEventListener('input', function () {
        const link = this.value;
        const preview = document.getElementById('previewLink');
        if (link) {
          preview.innerHTML = `Pré-visualização: <a href="${link}" target="_blank" style="color:#00ffcc">${link}</a>`;
        } else {
          preview.innerHTML = '';
        }
      });

      const botaoBusca = document.querySelector('.fa-search');
      if (botaoBusca) botaoBusca.addEventListener('click', filtrarProdutos);
    };

    window.adicionarProduto = adicionarProduto;
    window.atualizarModelos = atualizarModelos;
  </script>
</body>
</html>
